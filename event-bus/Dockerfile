FROM bitnami/kafka:latest

ENV KAFKA_CFG_NODE_ID="0"
ENV KAFKA_CFG_PROCESS_ROLES="controller,broker"
ENV KAFKA_CFG_LISTENERS="PLAINTEXT://:9092,CONTROLLER://:9093"
ENV KAFKA_CFG_LISTENER_SECURITY_PROTOCOL_MAP="CONTROLLER:PLAINTEXT,PLAINTEXT:PLAINTEXT"
ENV KAFKA_CFG_CONTROLLER_QUORUM_VOTERS="0@event-bus-service:9093"
ENV KAFKA_CFG_CONTROLLER_LISTENER_NAMES="CONTROLLER"

# Expose Kafka and Kafka Connect ports
EXPOSE 9092 9093 8083